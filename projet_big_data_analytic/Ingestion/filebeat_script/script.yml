filebeat.inputs:
- type: httpjson
  request.url: https://archive-api.open-meteo.com/v1/archive?latitude=14.69&longitude=-17.44&start_date=2002-01-01&end_date=2022-12-31&hourly=temperature_2m,relativehumidity_2m,apparent_temperature,pressure_msl,windspeed_10m,weathercode,rain
  json.keys_under_root: true
  json.overwrite_keys: true
processors:
- decode_json_fields:
    fields: ["message"]
    target: ""
    overwrite_keys: false
- drop_fields:
    fields: ["*"]
    ignore_missing: true
- include_fields:
      fields: ["hourly"]
output.file:
  path: "/home/hadoop/"
  filename: dakar_weather_2002_2022